{% extends 'layout.html' %}

{% block title %}Configurations{% endblock %}

{% block content %}
<div class="container">
    <form id="myForm" action="/api/node_2/remote_aircon_temp" method="POST">
        <fieldset>
            <legend>Aircon Temperature Control</legend>
            <label for="appliance_id">Appliance ID:</label>
            <select id="appliance_id" name="appliance_id" required>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <br>
            <label for="value">Value:</label>
            <input type="number" id="value" name="value" min="16" max="30" required>
            <br>
        </fieldset>
        <br>
        <input type="submit" value="Submit">
    </form>
</div>
{% endblock %}

{% block script %}
<script>
    document.getElementById("myForm").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent form submission
      
      var form = event.target;
      var formData = new FormData(form);
      
      fetch(form.action, {
        method: form.method,
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        // Request successful, do something with the response
        console.log(data);
      })
      .catch(error => {
        // Handle any errors
        console.error(error);
      });
    });
  </script>
{% endblock %}