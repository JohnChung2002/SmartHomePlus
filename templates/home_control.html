{% extends 'layout.html' %}

{% block title %}Configurations{% endblock %}

{% block content %}
<div class="container">
    <form id="myForm1" action="/api/node_2/remote_aircon_temp" method="POST">
        <fieldset>
            <legend>Aircon Temperature Control</legend>
            <label for="appliance_id">Appliance ID:</label>
            <select id="appliance_id" name="appliance_id" required>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <br>
            <label for="value">Value:</label>
            <input type="number" id="value" name="value" min="16" max="30" required>
            <br>
        </fieldset>
        <br>
        <input type="submit" value="Submit">
    </form>
    <br/>
    <form id="myForm2" action="/api/node_2/remote_trigger" method="POST">
        <fieldset>
            <legend>Remote Appliance Control</legend>
            <label for="appliance_id">Appliance ID:</label>
            <select id="appliance_id" name="appliance_id" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
            </select>
            <br>
            <label for="status">Status:</label>
            <select id="status" name="status" required>
                <option value="1">On</option>
                <option value="0">Off</option>
            </select>
            <br>
        </fieldset>
        <br>
        <input type="submit" value="Submit">
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById("myForm1").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent form submission
      
      var form = event.target;
      var formData = new FormData(form);
      
      fetch(form.action, {
        method: form.method,
        body: formData
      })
      .then(response)
      .then(data => {
        // Request successful, do something with the response
        alert(data)
      })
      .catch(error => {
        // Handle any errors
        console.error(error);
      });
    });

    document.getElementById("myForm2").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission
        
        var form = event.target;
        var formData = new FormData(form);
        
        fetch(form.action, {
        method: form.method,
        body: formData
        })
        .then(response)
        .then(data => {
        // Request successful, do something with the response
        alert(data)
        })
        .catch(error => {
        // Handle any errors
        console.error(error);
        });
    });
</script>
{% endblock %}